@startuml
title 書籍管理システム - 各モジュールの役割と責任

package "クライアントモジュール" {
    class "検索UI" {
        + 検索フォームの表示
        + 検索リクエストの送信
    }
    class "予約UI" {
        + 予約フォームの表示
        + 予約リクエストの送信
    }
}

package "サーバモジュール" {
    class "書籍管理コントローラ" {
        + 書籍の登録・編集・削除リクエストの処理
        + 書籍サービスへの委譲
    }
    class "貸出管理コントローラ" {
        + 貸出予約および返却リクエストの処理
        + 貸出サービスへの委譲
    }
    class "ユーザー認証コントローラ" {
        + ユーザー認証リクエストの処理
        + 認証トークンの発行
    }
}

package "サービスモジュール" {
    class "書籍サービス" {
        + 書籍情報の取得・更新
        + 在庫確認
    }
    class "貸出サービス" {
        + 貸出予約の作成・キャンセル
        + 返却処理
    }
    class "ユーザーサービス" {
        + ユーザー情報の取得・認証
        + ユーザー登録・権限管理
    }
}

package "データアクセスモジュール (DAO)" {
    class "書籍DAO" {
        + 書籍情報のCRUD操作
    }
    class "ユーザーDAO" {
        + ユーザー情報のCRUD操作
    }
    class "貸出DAO" {
        + 貸出・予約情報のCRUD操作
    }
}

"検索UI" --> "書籍管理コントローラ" : 検索リクエストの送信
"予約UI" --> "貸出管理コントローラ" : 予約リクエストの送信
"書籍管理コントローラ" --> "書籍サービス" : 書籍情報の管理
"貸出管理コントローラ" --> "貸出サービス" : 貸出予約の処理
"ユーザー認証コントローラ" --> "ユーザーサービス" : ユーザー認証リクエスト
"書籍サービス" --> "書籍DAO" : 書籍情報のCRUD操作
"貸出サービス" --> "貸出DAO" : 予約・貸出情報のCRUD操作
"ユーザーサービス" --> "ユーザーDAO" : ユーザー情報のCRUD操作

@enduml